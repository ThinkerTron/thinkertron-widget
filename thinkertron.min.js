"use strict";/*!
 * ThinkerTron Widget
 * (c) 2025 ThinkerTron.com
 * This JavaScript is proprietary. Redistribution or modification is prohibited.
 * Use requires an active license or agreement with ThinkerTron.com
 * See: https://thinkertron.com/terms
 * Contact: hello@thinkertron.com
 */const THINKERTRON_VERSION="1.0.15";(function(){const fe=window.ThinkerTronConfig||{},{INPUT_PLACEHOLDER:Z="Comment",DEFAULT_STICKER_MESSAGE:Q="ThinkerTron",HELLO_MESSAGE:pe="This is a public chat. Share thoughts or questions with others, but protect your privacy. Set a nickname with /NickName â€” they're just for fun. Report issues with /alarm [reason].",ALARM_MESSAGE:ge="â€¼ï¸ /alarm is an automated feature that takes a deep look at the chat for potential privacy violations, abuse, violence, harassment, sexual material, child safety, self-harm, scams, or illegal activity. Checking now...",JUST_FOR_YOU:ee="Private to you",NICKNAME_CHANGE_MESSAGE:ke="Your nickname is now",MODERATED_MESSAGE:be="Your comment was moderated",OFFLINE_MESSAGE:ve="Connect?",MAX_CONNS_REACHED_MESSAGE:we="Waiting for a connection.",NO_ACTIVE_SUB_MESSAGE:ye="No subscription.",JUST_YOU_MESSAGE:Ce="Just you!",YOU_WORD:Ee="You",HELLO_WORD:xe="Welcome",LATEST_TEXT:Se="â¬‡",INSTANT_AWARENESS:Te=!0,CLOSE_SOCKET_AFTER_MINIMISE:Le=15*1e3,CLOSE_SOCKET_AFTER_INACTIVITY:Ne=3*60*1e3,HELLO_MESSAGE_DELAY:_e=300,PRIMARY_COLOR:A="#196ff0",PRIMARY_TEXT:Ae="",BACKGROUND_LIGHT_OVERRIDE:Oe="",BACKGROUND_DARK_OVERRIDE:Ie=""}=fe;let P=null,te=null,r=null,E=null,O=null,W=null,o,L=!1,G=0;const Me=7;let R=!1,X=!1,d=!1,Y="";const u=Object.freeze({ONLINE:"ONLINE",OFFLINE:"OFFLINE",MAX_CONNS_REACHED:"MAX_CONNS_REACHED",NO_ACTIVE_SUB:"NO_ACTIVE_SUB"});let I=u.OFFLINE,l=null,b=null,y=null,p=null,c=null,m=null,C=null,i=null,v=null,N=null,$=null,z=null,H=null,x=null;const Re=!0,ze=Re?(console.log("Connecting to remote TT server."),"wss://thinkertron-server.onrender.com/ws"):(console.log("Connecting to local TT server."),"ws://127.0.0.1:8080/ws");function He(){const e=localStorage.getItem("ThinkerTron3000Prefs");if(e)try{const t=JSON.parse(e);o.nick=t.nick||o.nick,o.open=t.open!==void 0?t.open:o.open,o.theme=t.theme||"auto"}catch(t){console.warn("Invalid localStorage ThinkerTron3000Prefs:",t)}}function $e(){o={nick:"Visitor",open:!1,theme:"auto"}}function B(){localStorage.setItem("ThinkerTron3000Prefs",JSON.stringify(o))}function j(){if(l.children.length>500)for(let t=0;t<100;t++)l.firstElementChild&&l.removeChild(l.firstElementChild)}function Be(e){try{const t=new URL(e);let n=t.hostname.toLowerCase().replace(/^www\./,"").replace(/[^a-z0-9\.-]/g,"").replace(/\.+/g,"."),a=t.pathname.replace(/\/+$/,"").replace(/^\/+/,"").toLowerCase().split("/").filter(Boolean).map(f=>f.replace(/[^a-z0-9_.-]/g,"-").slice(0,50));const h=a.length?a.join("/"):"index";return[n,h]}catch(t){return console.error("Invalid URL in getURLString:",t),["invalid.domain","invalid/path"]}}function De(e){typeof e=="function"&&(document.readyState==="loading"?g(document,"DOMContentLoaded",e):e())}function Ue(e){const t=e.indexOf(":"),n=e.indexOf(":",t+1);if(t===-1||n===-1)return null;const s=e.slice(0,t),a=e.slice(t+1,n),h=e.slice(n+1);return{role:s,sender:a,message:h}}function Fe(e){if(!d)if(e.data.startsWith("/conns:")){let t=parseInt(e.data.split(":")[1],10);t<2?x.textContent=Ce:x.textContent=`${Ee} + ${t-1}`}else if(e.data.startsWith("/nickname:")){let t=e.data.split(":")[1];o.nick==="Visitor"&&t&&(o.nick=t,B())}else Pe(e.data,"broadcast")}function D(e){if(d)return;const t=document.createElement("p");t.className="tt-internal",t.textContent=e;const n=document.createElement("span");n.textContent=`${ee}, ${o.nick}`,n.classList.add("thinkertron-label"),t.appendChild(n),l.appendChild(t),m.style.display=="none"&&_(),j()}function Ve(e){if(d)return;const t=document.createElement("p");t.className="tt-internal",t.textContent=e;const n=document.createElement("span");n.textContent=`${ee}: ${be}`,n.classList.add("thinkertron-label"),t.appendChild(n),l.appendChild(t),m.style.display=="none"&&_(),j()}function Pe(e){if(d)return;const t=Ue(e);if(!t)return;let{role:n,sender:s,message:a}=t;const h=[P,"thinkertron.com"],f=/\b((https?:\/\/)?(www\.)?([a-z0-9-]+\.[a-z]{2,})([^\s]*))/gi;if(a=a.replace(f,(T,Ke,Je,qe,Ye)=>h.some(je=>Ye.toLowerCase().endsWith(je))?T:`âš ï¸ ${T}`),n=="tt-system"){a=="MAX_CONNS_REACHED"&&(L=!1,M(u.MAX_CONNS_REACHED)),a=="NO_ACTIVE_SUB"&&M(u.NO_ACTIVE_SUB);return}if(n=="tt-moderated"){Ve(a);return}if(n=="tt-internal"){D(a);return}let w=document.createElement("div"),ue=document.createElement("p"),q=document.createElement("p"),he=document.createElement("span");if(he.textContent=a,q.classList.add(n),q.appendChild(he),w.classList.add("msgrow"),n=="tt-you"&&w.appendChild(ue),w.appendChild(q),n=="tt-chat"&&w.appendChild(ue),n=="tt-chat"||n=="tt-summary"){const T=document.createElement("span");T.textContent=`${s}`,n=="tt-chat"?T.classList.add("thinkertron-sender-label"):(T.classList.add("thinkertron-sender-label"),T.classList.add("thinkertron-ai-label")),w.insertAdjacentElement("afterbegin",T)}l.appendChild(w),m.style.display=="none"&&_(),j()}function ne(e){if(d)return;e.preventDefault(),i.classList.add("thinkertron-animated-bg"),setTimeout(()=>{i.classList.remove("thinkertron-animated-bg")},500);let t=i.value.trim().replace(/\s+/g," ").slice(0,1e3);if(!t)return;if(C.reset(),typeof t=="string"&&t.trim().toLowerCase().startsWith("/alarm")){D(`${ge}`);const a=t.trim().slice(6).trim().replace(/^\/+/,"").slice(0,300),h=`__ALARM__${o.nick}:${a}`;try{r.send(h)}catch(f){console.warn("Send failed:",f)}return}if(typeof t=="string"&&t.trim().startsWith("/")){const a=t.trim().slice(1,21).replace(/[:;_]/g,""),h=a.length>0?a:"Visitor";o.nick=h,D(`${ke} ${o.nick}`),B();return}const n=`${o.nick}:${t}`;try{r.send(n)}catch(s){console.warn("Send failed:",s)}}function We(e){e=e.replace("#",""),e.length===3&&(e=e.split("").map(a=>a+a).join(""));const t=[+`0x${e.slice(0,2)}`,+`0x${e.slice(2,4)}`,+`0x${e.slice(4,6)}`],n=a=>{const h=a.map(f=>f/255).map(f=>f<=.03928?f/12.92:((f+.055)/1.055)**2.4);return .2126*h[0]+.7152*h[1]+.0722*h[2]},s=(a,h)=>{const f=Math.max(.022,n(a)),w=Math.max(.022,n(h));return 100*(w>f?(w**.56-f**.57)*1.14:(w**.65-f**.62)*1.14)};return Math.abs(s([0,0,0],t))>=Math.abs(s([255,255,255],t))?"#000000":"#ffffff"}function Ge(){const e=Ae||We(A);let t=Oe||e,n=Ie||A;const s=document.createElement("style");s.textContent=`#thinkertron-widget {--thinkertron-bg: ${A};--thinkertron-fg: ${e};--thinkertron-bg-override: ${t};--thinkertron-font-size: 0.76rem;--thinkertron-line-height: 0.96rem;--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;}
#thinkertron-widget[data-theme='light'] {--thinkertron-bg: ${A};--thinkertron-fg: ${e};--thinkertron-bg-override: ${t};}
#thinkertron-widget[data-theme='dark'] {--thinkertron-bg: ${e};--thinkertron-fg: ${A};--thinkertron-bg-override: ${n};}
@media (prefers-color-scheme: dark) {#thinkertron-widget:not([data-theme]) {--thinkertron-bg: ${e};--thinkertron-fg: ${A};--thinkertron-bg-override: ${n};}}
/* compressed start */
#thinkertron-widget{z-index:10000;box-sizing:border-box;overflow:hidden;border-radius:.8rem .8rem .8rem 0rem;bottom:6%;right:3%;position:fixed;max-width:25rem;border:.3rem solid var(--thinkertron-fg);background-color:#888;background-color:var(--thinkertron-bg-override);color:var(--thinkertron-primary-text);box-shadow:0 -1px 1px #00000014,0 1px 1px #0000001f,0 2px 2px #0000001f,0 4px 4px #0000001f,0 8px 8px #0000001f,0 16px 16px #0000001f}#thinkertron-widget #tt-badge-div{position:relative;background-color:var(--thinkertron-bg)}#thinkertron-widget #tt-theme-button,#thinkertron-widget #tt-minimise-button{height:100%;display:inline-block;position:absolute;top:0;cursor:pointer!important;pointer-events:auto}#thinkertron-widget #tt-theme-button{left:0rem}#thinkertron-widget #tt-minimise-button{right:0rem}#thinkertron-widget #tt-theme-button svg,#thinkertron-widget #tt-minimise-button svg{color:var(--thinkertron-fg);height:80%;display:inline-block;position:relative;top:50%;transform:translateY(-50%);padding:.1rem .3rem}#thinkertron-widget #tt-badge-text{font-family:var(--thinkertron-font);font-size:.95rem;line-height:.95rem;font-weight:700;color:var(--thinkertron-fg);text-align:center;padding:.5rem .6rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer!important;display:inline-block;pointer-events:auto;border:1px solid red}#thinkertron-widget #tt-main-container{box-sizing:border-box;color:var(--thinkertron-bg);pointer-events:none;position:relative;padding:0;margin:0}#thinkertron-widget #tt-main{box-sizing:border-box;pointer-events:auto;position:relative;font-family:var(--thinkertron-font);font-size:var(--thinkertron-font-size, .8rem);line-height:var(--thinkertron-line-height);padding:.2rem;max-height:67dvh;min-height:25dvh;overflow-y:auto;scrollbar-width:none;width:100%;min-width:20rem}#thinkertron-widget #tt-latest{box-sizing:border-box;pointer-events:auto;cursor:pointer;position:absolute;bottom:2.5rem;border-radius:2rem 2rem 2rem 0rem;right:.5rem;z-index:4;text-align:center;height:auto;padding:.6rem 1.2rem;font-family:var(--thinkertron-font);font-size:.75rem;line-height:.8rem;background-color:var(--thinkertron-bg);opacity:1;color:var(--thinkertron-fg);font-weight:600;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px #0000001f,0 2px 2px #0000001f,0 4px 4px #0000001f,0 8px 8px #0000001f,0 16px 16px #0000001f}#thinkertron-widget #tt-form{box-sizing:border-box;padding:.4rem;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#thinkertron-widget #tt-input{box-sizing:border-box;pointer-events:auto;border:.05rem solid var(--thinkertron-bg);border-radius:1rem;padding:.3rem .5rem;background-color:var(--thinkertron-bg-override);color:var(--thinkertron-bg);font-family:var(--thinkertron-font);font-size:var(--thinkertron-font-size, .8rem);font-weight:500;position:relative;width:100%;cursor:pointer}#thinkertron-widget #tt-offline-div{box-sizing:border-box;position:absolute;top:1rem;right:.5rem;border-radius:2rem 2rem 2rem 0rem;z-index:2;text-align:center;height:auto;padding:.6rem 1.2rem;font-family:var(--thinkertron-font);font-size:.75rem;font-weight:600;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px #0000001f,0 2px 2px #0000001f,0 4px 4px #0000001f,0 8px 8px #0000001f,0 16px 16px #0000001f}#thinkertron-widget #tt-main p{scroll-snap-align:start;margin:.5rem 0 0}#thinkertron-widget input[type=text]#tt-input::-webkit-input-placeholder{color:var(--thinkertron-bg)}#thinkertron-widget input[type=text]#tt-input::-moz-placeholder{color:var(--thinkertron-bg)}#thinkertron-widget .tt-you,#thinkertron-widget .tt-chat,#thinkertron-widget .tt-internal,#thinkertron-widget .tt-summary{font-family:var(--thinkertron-font);font-size:var(--thinkertron-font-size);font-weight:500;line-height:var(--thinkertron-line-height);padding:.3rem .4rem;color:var(--thinkertron-fg);margin-bottom:.7rem!important}#thinkertron-widget .tt-internal,#thinkertron-widget .tt-summary{border-radius:.7rem .7rem .7rem 0rem;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);font-size:.66rem;line-height:.8rem;margin-bottom:.9rem!important}#thinkertron-widget .tt-you{text-align:left;border-radius:.4rem .4rem .4rem 0;border:.05rem solid var(--thinkertron-bg);background-color:var(--thinkertron-bg-override);color:var(--thinkertron-bg);flex:0 0 auto;max-width:77%;margin-bottom:.2rem!important}#thinkertron-widget .tt-chat{text-align:left;border-radius:.4rem .4rem .4rem 0;border:.05rem solid var(--thinkertron-bg);background-color:var(--thinkertron-bg-override);color:var(--thinkertron-bg);flex:0 0 auto;max-width:77%}#thinkertron-widget .thinkertron-label{display:inline-block;position:absolute;font-size:.55rem;font-weight:700;line-height:.7rem;margin-top:.8rem;right:.2rem;border-radius:1rem;padding:.1rem .4rem;background-color:var(--thinkertron-fg);color:var(--thinkertron-bg);border:.05rem solid var(--thinkertron-bg);z-index:2}#thinkertron-widget .thinkertron-sender-label{display:inline-block;position:absolute;font-size:.55rem;font-weight:700;line-height:.7rem;margin-top:-.1rem;left:.2rem;border-radius:1rem;padding:.1rem .4rem;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);z-index:2}#thinkertron-widget .thinkertron-ai-label{background-color:var(--thinkertron-fg);color:var(--thinkertron-bg);border:.05rem solid var(--thinkertron-bg);z-index:2}#thinkertron-widget .msgrow{display:flex;justify-content:space-between}#thinkertron-widget .offlineIsButton{cursor:pointer;pointer-events:auto;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg)}#thinkertron-widget .offlineIsNotButton{cursor:default;pointer-events:none;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);border:.2rem solid var(--thinkertron-fg)}#thinkertron-widget .thinkertron-animated-bg{background:linear-gradient(90deg,var(--thinkertron-fg),var(--thinkertron-bg));background-size:200% 100%;background-clip:border-box;-webkit-background-clip:border-box;animation:borderShift .5s linear infinite}@keyframes borderShift{0%{background-position:200% 50%}to{background-position:0% 50%}}
/* compressed end */`,document.head.appendChild(s)}function U(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}function re(e){e==="auto"?p.removeAttribute("data-theme"):p.setAttribute("data-theme",e),$.style.display="none",z.style.display="none",H.style.display="none",e==="auto"?$.style.display="":e==="light"?z.style.display="":e==="dark"&&(H.style.display="")}function oe(){const e=["auto","light","dark"],t=o.theme||"auto",n=e.indexOf(t),s=e[(n+1)%e.length];o.theme=s,B(),re(s)}function Xe(){p=document.createElement("div"),p.id="thinkertron-widget",v=document.createElement("div"),v.id="tt-theme-button",g(v,"click",t=>{t.stopPropagation(),oe()}),$=U('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 2C12.87 2 16 5.13 16 9C16 11.38 14.81 13.47 13 14.74V17C13 17.55 12.55 18 12 18H6C5.45 18 5 17.55 5 17V14.74C3.19 13.47 2 11.38 2 9C2 5.13 5.13 2 9 2M6 21V20H12V21C12 21.55 11.55 22 11 22H7C6.45 22 6 21.55 6 21M9 4C6.24 4 4 6.24 4 9C4 11.05 5.23 12.81 7 13.58V16H11V13.58C12.77 12.81 14 11.05 14 9C14 6.24 11.76 4 9 4M19 13H17L13.8 22H15.7L16.4 20H19.6L20.3 22H22.2L19 13M16.85 18.65L18 15L19.15 18.65H16.85Z"/></svg>'),v.appendChild($),z=U('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>'),z.style.cssText="display: none;",v.appendChild(z),H=U('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M17 6H7C3.69 6 1 8.69 1 12S3.69 18 7 18H17C20.31 18 23 15.31 23 12S20.31 6 17 6M17 16H7C4.79 16 3 14.21 3 12S4.79 8 7 8H17C19.21 8 21 9.79 21 12S19.21 16 17 16M17 9C15.34 9 14 10.34 14 12S15.34 15 17 15 20 13.66 20 12 18.66 9 17 9Z"/></svg>'),H.style.cssText="display: none;",v.appendChild(H),N=document.createElement("div"),N.id="tt-minimise-button";const e=U('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 20.03C7.59 20.03 3.97 16.41 3.97 12C3.97 7.59 7.59 3.97 12 3.97C16.41 3.97 20.03 7.59 20.03 12C20.03 16.41 16.41 20.03 12 20.03M12 22C17.54 22 22 17.54 22 12C22 6.46 17.54 2 12 2C6.46 2 2 6.46 2 12C2 17.54 6.46 22 12 22M13.88 12.47L16 10.36V16H10.36L12.47 13.88L7.5 8.9L8.9 7.5"/></svg>');N.appendChild(e),g(N,"click",t=>{t.stopPropagation(),K()}),x=document.createElement("div"),x.id="tt-badge-text",x.textContent=Q,y=document.createElement("div"),y.id="tt-badge-div",g(y,"click",t=>{t.stopPropagation(),K()}),y.appendChild(x),y.appendChild(N),y.appendChild(v),b=document.createElement("div"),b.id="tt-main-container",l=document.createElement("div"),l.id="tt-main",l.addEventListener("scroll",()=>{const n=Math.abs(l.scrollHeight-l.scrollTop-l.clientHeight)<=6;m.style.display=n?"none":""}),m=document.createElement("div"),m.id="tt-latest",m.textContent=Se,m.style.cssText="display:none;",g(m,"click",me),b.appendChild(m),C=document.createElement("form"),C.id="tt-form",C.setAttribute("autocomplete","off"),g(C,"submit",ne),i=document.createElement("input"),i.id="tt-input",i.type="text",i.placeholder="",g(i,"click",S),g(i,"input",S),i.setAttribute("autocomplete","off"),i.setAttribute("maxlength","1000"),i.setAttribute("spellcheck","false"),i.setAttribute("placeholder",Z),g(i,"focus",de),g(i,"blur",ce),c=document.createElement("div"),c.id="tt-offline-div",m.style.cssText="display:none;",g(c,"click",ae),c.textContent="...",b.appendChild(c),b.appendChild(l),C.appendChild(i),b.appendChild(C),p.appendChild(b),p.appendChild(y),document.body.appendChild(p)}function S(){d||(clearTimeout(E),E=setTimeout(()=>{L=!0,F("inactivity")},Ne))}function F(e="Normal"){r&&r.readyState===WebSocket.OPEN&&r.close()}function ie(){d||(o.open==!0?(b.style.display="",p.style.borderRadius="0.8rem 0.8rem 0.8rem 0rem",v.style.display="",N.style.display=""):(b.style.display="none",p.style.borderRadius="2rem 2rem 2rem 0rem",v.style.display="none",N.style.display="none"))}function K(){d||X||(X=!0,setTimeout(()=>{X=!1},200),o.open=!o.open,B(),ie(),_(),S(),o.open&&(!r||r&&r.readyState==WebSocket.CLOSED)&&(L=!1,V()),!o.open&&r&&(E=setTimeout(F,Le)))}function M(e){if(d)return;I=e;let t="";switch(e){case u.ONLINE:c.style.display="none",i.style.display="";break;case u.OFFLINE:t=Y+ve,c.style.display="",i.style.display="none",m.style.display="none",c.classList.remove("offlineIsNotButton"),c.classList.add("offlineIsButton");break;case u.MAX_CONNS_REACHED:t=we,c.style.display="",i.style.display="none",m.style.display="none",c.classList.remove("offlineIsButton"),c.classList.add("offlineIsNotButton");break;case u.NO_ACTIVE_SUB:t=ye,c.style.display="",i.style.display="none",m.style.display="none",c.classList.remove("offlineIsButton"),c.classList.add("offlineIsNotButton");break;default:console.log("Unknown ThinkerTron state: "+e)}c.textContent=t}function ae(){d||(S(),I===u.OFFLINE&&(L=!1,V()))}function se(){if(G>=Me){O=null,M(u.OFFLINE);return}G++,O=setTimeout(()=>{V(),se()},4500)}function V(){if(Y="",d||R)return;if(R=!0,L=!1,clearTimeout(E),S(),r&&[WebSocket.OPEN,WebSocket.CONNECTING,WebSocket.CLOSING].includes(r.readyState)){R=!1;return}O||(G=0);const e=`${window.location.origin}${window.location.pathname}`;[P,te]=Be(e);const t=`${ze}/${P}/${te}`;r=new WebSocket(t);const n=r;r.onerror=s=>{console.log("Connection Error."),Y="Network error. "},r.onopen=()=>{d||(R=!1,clearTimeout(E),S(),M(u.ONLINE),L=!1,J(),setTimeout(()=>{I===u.ONLINE&&(M(u.ONLINE),D(`${xe} ${o.nick}! `+pe))},_e))},r.onmessage=s=>{d||Fe(s)},r.onclose=s=>{if(!d){if(r!==n){console.log("Stale socket close ignored.");return}R=!1,I!==u.MAX_CONNS_REACHED&&I!==u.NO_ACTIVE_SUB&&M(u.OFFLINE),clearTimeout(E),J(),r.onmessage=r.onopen=r.onclose=null,r=null,x.textContent=Q,l.innerHTML="",m.style.display="none",_(),L?console.log("ThinkerTron connection released."):I===u.MAX_CONNS_REACHED&&!O&&se()}},window.__tt_beforeThinkerTronUnloadListenerAdded||(window.__tt_beforeThinkerTronUnloadListenerAdded=!0,window.addEventListener("beforeunload",()=>{F()}))}function le(){d||(clearTimeout(W),W=null,W=setTimeout(()=>{requestAnimationFrame(()=>{_()})},200))}function de(){this.placeholder=""}function ce(){this.placeholder=Z}function me(){_()}function _(){d||requestAnimationFrame(()=>{l&&(l.scrollTop=l.scrollHeight)})}function J(){clearTimeout(O),O=null}function k(e,t,n){e&&typeof e.removeEventListener=="function"&&typeof n=="function"&&e.removeEventListener(t,n)}function g(e,t,n,s){e&&typeof e.addEventListener=="function"&&typeof n=="function"&&e.addEventListener(t,n,s||!1)}window.teardownThinkerTron=function(){d||(d=!0,k(window,"resize",le),k(window,"beforeunload",F),k(C,"submit",ne),k(i,"click",S),k(i,"input",S),k(i,"focus",de),k(i,"blur",ce),k(y,"click",K),k(m,"click",me),k(c,"click",ae),k(v,"click",oe),clearTimeout(E),E=null,J(),r&&r.readyState===WebSocket.OPEN&&r.close(),r=null,p&&p.parentNode&&p.parentNode.removeChild(p),l=b=y=x=p=c=m=C=i=null,o=null)},De(function(){console.log(`ðŸŸ¢ ThinkerTron Widget v${THINKERTRON_VERSION} booting...`),$e(),He(),Ge(),Xe(),re(o.theme),ie(),(o.open||Te)&&setTimeout(()=>V(),200),g(window,"resize",le)})})();
