/*!
 * 
 * ThinkerTron Widget
 * (c) 2025 ThinkerTron.com
 * This JavaScript is proprietary. Redistribution or modification is prohibited.
 * Use requires an active license or agreement with ThinkerTron.com
 * See: https://thinkertron.com/terms
 * Contact: hello@thinkertron.com
 *
 */"use strict";const THINKERTRON_CSS="#thinkertron-widget{z-index:2147483647;box-sizing:border-box;overflow:hidden;border-radius:.8rem .8rem .8rem 0;bottom:4%;right:3%;margin-left:3%;position:fixed;max-width:25rem;border:.3rem solid var(--thinkertron-fg);background-color:#888;background-color:var(--thinkertron-bg-override);color:var(--thinkertron-primary-text);box-shadow:0 -1px 1px rgba(0,0,0,8%),0 1px 1px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.12),0 4px 4px rgba(0,0,0,.12),0 8px 8px rgba(0,0,0,.12),0 16px 16px rgba(0,0,0,.12);transition:color .4s ease,background-color .4s ease}#thinkertron-widget #tt-badge-div{position:relative;background-color:var(--thinkertron-bg);transition:background-color .4s ease}#thinkertron-widget #tt-theme-button,#thinkertron-widget #tt-minimise-button{height:100%;display:inline-block;position:absolute;top:0;cursor:pointer!important;pointer-events:auto}#thinkertron-widget #tt-theme-button{left:0rem}#thinkertron-widget #tt-minimise-button{right:0rem}#thinkertron-widget #tt-theme-button svg,#thinkertron-widget #tt-minimise-button svg{color:var(--thinkertron-fg);height:66%;display:inline-block;position:relative;top:50%;transform:translateY(-50%);padding:.1rem .3rem;transition:color .4s ease}#thinkertron-widget #tt-badge-text{font-family:var(--thinkertron-font,'--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;');font-size:max(.8rem,16px);line-height:max(1rem,18px);font-weight:700;color:var(--thinkertron-fg);width:100%;text-align:center;padding:.5rem .6rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer!important;display:inline-block;pointer-events:auto;transition:color .4s ease}#thinkertron-widget #tt-main-container{box-sizing:border-box;color:var(--thinkertron-bg);pointer-events:none;position:relative;padding:0;margin:0;transition:color .4s ease}#thinkertron-widget #tt-main{box-sizing:border-box;pointer-events:auto;position:relative;padding:.7rem;max-height:67dvh;min-height:25dvh;overflow-y:auto;scrollbar-width:none;width:100%;min-width:16rem}#thinkertron-widget #tt-latest{box-sizing:border-box;pointer-events:auto;cursor:pointer;position:absolute;bottom:2.5rem;border-radius:2rem 2rem 2rem 0;right:.5rem;z-index:4;text-align:center;height:auto;padding:.6rem 1.2rem;font-family:var(--thinkertron-font,'--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;');font-size:.75rem;line-height:.8rem;background-color:var(--thinkertron-bg);opacity:1;color:var(--thinkertron-fg);font-weight:600;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.12),0 4px 4px rgba(0,0,0,.12),0 8px 8px rgba(0,0,0,.12),0 16px 16px rgba(0,0,0,.12);transition:color .4s ease,background-color .4s ease}#thinkertron-widget #tt-form{box-sizing:border-box;padding:.4rem;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#thinkertron-widget #tt-input{box-sizing:border-box;pointer-events:auto;border:.05rem solid var(--thinkertron-bg);border-radius:.4rem .4rem .4rem 0;padding:.3rem .5rem;background-color:var(--thinkertron-bg-override);color:var(--thinkertron-bg);font-family:var(--thinkertron-font,'--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;');font-size:max(.8rem,16px);font-weight:400;position:relative;width:100%;cursor:pointer;transition:color .4s ease,background-color .4s ease,border-color .4s ease}#thinkertron-widget #tt-offline-div{box-sizing:border-box;position:absolute;top:1rem;right:.5rem;border-radius:2rem 2rem 2rem 0;z-index:2;text-align:center;height:auto;padding:.6rem 1.2rem;font-family:var(--thinkertron-font,'--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;');font-size:.75rem;font-weight:600;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.12),0 4px 4px rgba(0,0,0,.12),0 8px 8px rgba(0,0,0,.12),0 16px 16px rgba(0,0,0,.12)}#thinkertron-widget #tt-main p{scroll-snap-align:start;margin:.5rem 0 0}#thinkertron-widget input[type=text]#tt-input::-webkit-input-placeholder{color:var(--thinkertron-bg);transition:color .4s ease}#thinkertron-widget input[type=text]#tt-input::-moz-placeholder{color:var(--thinkertron-bg);transition:color .4s ease}#thinkertron-widget .tt-you,#thinkertron-widget .tt-chat,#thinkertron-widget .tt-internal,#thinkertron-widget .tt-summary{font-family:var(--thinkertron-font,'--thinkertron-font: -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif;');font-size:max(.8rem,16px);line-height:max(1rem,18px);background-color:var(--thinkertron-bg-override);color:var(--thinkertron-bg);font-weight:400;padding:.4rem .5rem;transition:color .4s ease}#thinkertron-widget .tt-internal,#thinkertron-widget .tt-summary{border-radius:.7rem .7rem .7rem 0;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);margin-bottom:.7rem!important;transition:color .4s ease,background-color .4s ease}#thinkertron-widget .tt-you,#thinkertron-widget .tt-chat{text-align:left;border-radius:.4rem .4rem .4rem 0;border:.05rem solid var(--thinkertron-bg);flex:none;max-width:77%;margin-bottom:.5rem!important;transition:border-color .4s ease}#thinkertron-widget .thinkertron-label{display:inline-block;position:absolute;font-size:.65rem;font-weight:500;line-height:.7rem;margin-top:.8rem;right:.9rem;border-radius:1rem;padding:.1rem .4rem;background-color:var(--thinkertron-fg);color:var(--thinkertron-bg);border:.05rem solid var(--thinkertron-bg);z-index:2;transition:color .4s ease,background-color .4s ease,border-color .4s ease}#thinkertron-widget .thinkertron-sender-label{display:inline-block;position:absolute;font-size:.65rem;font-weight:500;line-height:.7rem;margin-top:-.1rem;left:.9rem;border-radius:1rem;padding:.1rem .4rem;background-color:var(--thinkertron-bg);color:var(--thinkertron-fg);z-index:2;transition:color .4s ease,background-color .4s ease}#thinkertron-widget .thinkertron-ai-label{background-color:var(--thinkertron-fg);color:var(--thinkertron-bg);border:.05rem solid var(--thinkertron-bg);z-index:2;transition:color .4s ease,background-color .4s ease,border-color .4s ease}#thinkertron-widget .msgrow{display:flex;justify-content:space-between}#thinkertron-widget .thinkertron-animated-bg{background:linear-gradient(90deg,var(--thinkertron-fg),var(--thinkertron-bg));background-size:200% 100%;background-clip:border-box;-webkit-background-clip:border-box;animation:borderShift .5s linear infinite}@keyframes borderShift{0%{background-position:200%}100%{background-position:0}}",THINKERTRON_VERSION="1.0.25";(function(){const le=!0,Oe=window.ThinkerTronConfig||{},{INPUT_PLACEHOLDER:K="Comment",DEFAULT_STICKER_MESSAGE:V="ThinkerTron",HELLO_MESSAGE:we="This is a public chat. Share thoughts or questions with others, but protect your privacy. Set a nickname with /NickName â€” they're just for fun. Report issues with /alarm [reason].",ALARM_MESSAGE:_e="â€¼ï¸ /alarm is an automated feature that takes a deep look at the chat for potential privacy violations, abuse, violence, harassment, sexual material, child safety, self-harm, scams, or illegal activity. Checking now...",JUST_FOR_YOU:N="Private to you",NICKNAME_CHANGE_MESSAGE:ye="Your nickname is now",MODERATED_MESSAGE:je="Your comment was moderated",OFFLINE_MESSAGE:be="Offline",MAX_CONNS_REACHED_MESSAGE:ve="Waiting for a connection.",NO_ACTIVE_SUB_MESSAGE:ge="No subscription.",JUST_YOU_MESSAGE:pe="Just you!",YOU_WORD:fe="You",HELLO_WORD:me="Welcome",LATEST_TEXT:he="Latest",CLOSE_SOCKET_AFTER_MINIMISE:$=2*1e3,HELLO_MESSAGE_DELAY:de=300,PRIMARY_COLOR:j="#196ff0",PRIMARY_TEXT:Y="",BACKGROUND_LIGHT_OVERRIDE:ce="",BACKGROUND_DARK_OVERRIDE:ie="",THINKERTRON_FONT:ne=""}=Oe;let F=null,q=null,e=null,t,g=null,w=!1,T=!1,i=!1;const r=Object.freeze({ONLINE:"ONLINE",OFFLINE:"OFFLINE",MAX_CONNS_REACHED:"MAX_CONNS_REACHED",NO_ACTIVE_SUB:"NO_ACTIVE_SUB"});let A=r.OFFLINE,a=null,h=null,c=null,s=null,d=null,o=null,u=null,n=null,l=null,b=null,x=null,O=null,_=null,p=null;const Q=(()=>le?(console.log("Connecting to remote TT server."),"wss://thinkertron-server.onrender.com/ws"):(console.log("Connecting to local TT server."),"ws://127.0.0.1:8080/ws"))();function X(){const e=localStorage.getItem("ThinkerTron3000Prefs");if(e)try{const n=JSON.parse(e);t.nick=n.nick||t.nick,t.open=n.open!==0[0]?n.open:t.open,t.theme=n.theme||"auto"}catch(e){console.warn("Invalid localStorage ThinkerTron3000Prefs:",e)}}function G(){t={nick:"Visitor",open:!1,theme:"auto"}}function S(){localStorage.setItem("ThinkerTron3000Prefs",JSON.stringify(t))}function M(){const e=s.children.length;if(e>500)for(let e=0;e<100;e++)s.firstElementChild&&s.removeChild(s.firstElementChild)}function Z(e){try{const t=new URL(e);let s=t.hostname.toLowerCase().replace(/^www\./,"").replace(/[^a-z0-9.-]/g,"").replace(/\.+/g,"."),o=t.pathname.replace(/\/+$/,"").replace(/^\/+/,"").toLowerCase(),n=o.split("/").filter(Boolean).map(e=>e.replace(/[^a-z0-9_.-]/g,"-").slice(0,50));const i=n.length?n.join("/"):"index";return[s,i]}catch(e){return console.error("Invalid URL in getURLString:",e),["invalid.domain","invalid/path"]}}function J(e){if(typeof e!="function")return;document.readyState==="loading"?m(document,"DOMContentLoaded",e):e()}function ee(e){const t=e.indexOf(":"),n=e.indexOf(":",t+1);if(t===-1||n===-1)return null;const s=e.slice(0,t),o=e.slice(t+1,n),i=e.slice(n+1);return{role:s,sender:o,message:i}}function te(e){if(i)return;if(e.data.startsWith("/conns:")){let t=parseInt(e.data.split(":")[1],10);t<2?p.textContent=pe:p.textContent=`${fe} + ${t-1}`}else if(e.data.startsWith("/nickname:")){let n=e.data.split(":")[1];t.nick==="Visitor"&&n&&(t.nick=n,S())}else oe(e.data,"broadcast")}function E(e){if(i)return;const n=document.createElement("p");n.className="tt-internal",n.textContent=e;const a=document.createElement("span");a.textContent=`${N}, ${t.nick}`,a.classList.add("thinkertron-label"),n.appendChild(a),s.appendChild(n),o.style.display=="none"&&v(),M()}function se(e){if(i)return;const t=document.createElement("p");t.className="tt-internal",t.textContent=e;const n=document.createElement("span");n.textContent=`${N}: ${je}`,n.classList.add("thinkertron-label"),t.appendChild(n),s.appendChild(t),o.style.display=="none"&&v(),M()}function oe(e){if(i)return;const l=ee(e);if(!l)return;let{role:t,sender:h,message:n}=l;const m=[F,"thinkertron.com"],f=/\b((https?:\/\/)?(www\.)?([a-z0-9-]+\.[a-z]{2,})([^\s]*))/gi;if(n=n.replace(f,(e,t,n,s,o)=>m.some(e=>o.toLowerCase().endsWith(e))?e:`âš ï¸ ${e}`),t=="tt-system"){n=="MAX_CONNS_REACHED"&&y(r.MAX_CONNS_REACHED),n=="NO_ACTIVE_SUB"&&y(r.NO_ACTIVE_SUB);return}if(t=="tt-moderated"){se(n);return}if(t=="tt-internal"){E(n);return}let a=document.createElement("div"),d=document.createElement("p"),c=document.createElement("p"),u=document.createElement("span");if(u.textContent=n,c.classList.add(t),c.appendChild(u),a.classList.add("msgrow"),t=="tt-you"&&a.appendChild(d),a.appendChild(c),t=="tt-chat"&&a.appendChild(d),t=="tt-chat"||t=="tt-summary"){const e=document.createElement("span");e.textContent=`${h}`,t=="tt-chat"?e.classList.add("thinkertron-sender-label"):(e.classList.add("thinkertron-sender-label"),e.classList.add("thinkertron-ai-label")),a.insertAdjacentElement("afterbegin",e)}s.appendChild(a),o.style.display=="none"&&v(),M()}function B(s){if(i)return;s.preventDefault(),n.classList.add("thinkertron-animated-bg"),setTimeout(()=>{n.classList.remove("thinkertron-animated-bg")},500);let o=n.value.trim().replace(/\s+/g," ").slice(0,1e3);if(!o)return;if(u.reset(),typeof o=="string"&&o.trim().toLowerCase().startsWith("/alarm")){E(`${_e}`);const n=o.trim(),s=n.slice(6).trim().replace(/^\/+/,"").slice(0,300),i=`__ALARM__${t.nick}:${s}`;try{e.send(i)}catch(e){console.warn("Send failed:",e)}return}if(typeof o=="string"&&o.trim().startsWith("/")){const n=o.trim().slice(1,21),e=n.replace(/[:;_]/g,""),s=e.length>0?e:"Visitor";t.nick=s,E(`${ye} ${t.nick}`),S();return}const a=`${t.nick}:${o}`;try{e.send(a)}catch(e){console.warn("Send failed:",e)}}function ae(e){e=e.replace("#",""),e.length===3&&(e=e.split("").map(e=>e+e).join(""));const t=[+`0x${e.slice(0,2)}`,+`0x${e.slice(2,4)}`,+`0x${e.slice(4,6)}`],n=e=>{const t=e.map(e=>e/255).map(e=>e<=.03928?e/12.92:((e+.055)/1.055)**2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]},s=(e,t)=>{const s=Math.max(.022,n(e)),o=Math.max(.022,n(t));return 100*(o>s?(o**.56-s**.57)*1.14:(o**.65-s**.62)*1.14)};return Math.abs(s([0,0,0],t))>=Math.abs(s([255,255,255],t))?"#000000":"#ffffff"}function re(){const e=Y||ae(j);let t=ce||e,n=ie||j;const s=document.createElement("style");s.textContent=`
            #thinkertron-widget {--thinkertron-bg: ${j};--thinkertron-fg: ${e};--thinkertron-bg-override: ${t};--thinkertron-font: ${ne};}
            #thinkertron-widget[data-theme='light'] {--thinkertron-bg: ${j};--thinkertron-fg: ${e};--thinkertron-bg-override: ${t};} #thinkertron-widget[data-theme='dark'] {--thinkertron-bg: ${e};--thinkertron-fg: ${j};--thinkertron-bg-override: ${n};} @media (prefers-color-scheme: dark) {#thinkertron-widget:not([data-theme]) {--thinkertron-bg: ${e}; --thinkertron-fg: ${j}; --thinkertron-bg-override: ${n};}}`+THINKERTRON_CSS,document.head.appendChild(s)}function C(e){const t=new DOMParser,n=t.parseFromString(e,"image/svg+xml");return n.documentElement}function U(e){e==="auto"?a.removeAttribute("data-theme"):a.setAttribute("data-theme",e),x.style.display="none",O.style.display="none",_.style.display="none",e==="auto"?x.style.display="":e==="light"?O.style.display="":e==="dark"&&(_.style.display="")}function W(){const e=["auto","light","dark"],s=t.theme||"auto",o=e.indexOf(s),n=e[(o+1)%e.length];t.theme=n,S(),U(n)}function ue(){a=document.createElement("div"),a.id="thinkertron-widget",l=document.createElement("div"),l.id="tt-theme-button",m(l,"click",e=>{e.stopPropagation(),W()}),x=C(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M9 2C12.87 2 16 5.13 16 9C16 11.38 14.81 13.47 13 14.74V17C13 17.55 12.55 18 12 18H6C5.45 18 5 17.55 5 17V14.74C3.19 13.47 2 11.38 2 9C2 5.13 5.13 2 9 2M6 21V20H12V21C12 21.55 11.55 22 11 22H7C6.45 22 6 21.55 6 21M9 4C6.24 4 4 6.24 4 9C4 11.05 5.23 12.81 7 13.58V16H11V13.58C12.77 12.81 14 11.05 14 9C14 6.24 11.76 4 9 4M19 13H17L13.8 22H15.7L16.4 20H19.6L20.3 22H22.2L19 13M16.85 18.65L18 15L19.15 18.65H16.85Z"/></svg>`),l.appendChild(x),O=C(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>`),O.style.cssText="display: none;",l.appendChild(O),_=C(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M17 6H7C3.69 6 1 8.69 1 12S3.69 18 7 18H17C20.31 18 23 15.31 23 12S20.31 6 17 6M17 16H7C4.79 16 3 14.21 3 12S4.79 8 7 8H17C19.21 8 21 9.79 21 12S19.21 16 17 16M17 9C15.34 9 14 10.34 14 12S15.34 15 17 15 20 13.66 20 12 18.66 9 17 9Z"/></svg>`),_.style.cssText="display: none;",l.appendChild(_),b=document.createElement("div"),b.id="tt-minimise-button";const e=C(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 20.03C7.59 20.03 3.97 16.41 3.97 12C3.97 7.59 7.59 3.97 12 3.97C16.41 3.97 20.03 7.59 20.03 12C20.03 16.41 16.41 20.03 12 20.03M12 22C17.54 22 22 17.54 22 12C22 6.46 17.54 2 12 2C6.46 2 2 6.46 2 12C2 17.54 6.46 22 12 22M13.88 12.47L16 10.36V16H10.36L12.47 13.88L7.5 8.9L8.9 7.5"/></svg>`);b.appendChild(e),m(b,"click",e=>{e.stopPropagation(),z()}),p=document.createElement("div"),p.id="tt-badge-text",p.textContent=V,h=document.createElement("div"),h.id="tt-badge-div",m(h,"click",e=>{e.stopPropagation(),z()}),h.appendChild(p),h.appendChild(b),h.appendChild(l),c=document.createElement("div"),c.id="tt-main-container",s=document.createElement("div"),s.id="tt-main",s.addEventListener("scroll",()=>{const e=6,t=Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<=e;o.style.display=t?"none":""}),o=document.createElement("div"),o.id="tt-latest",o.textContent=he,o.style.cssText=`display:none;`,m(o,"click",I),c.appendChild(o),u=document.createElement("form"),u.id="tt-form",u.setAttribute("autocomplete","off"),m(u,"submit",B),n=document.createElement("input"),n.id="tt-input",n.type="text",n.placeholder="",n.style.cssText=`display:none;`,n.setAttribute("autocomplete","off"),n.setAttribute("maxlength","1000"),n.setAttribute("spellcheck","false"),n.setAttribute("placeholder",K),m(n,"focus",P),m(n,"blur",H),d=document.createElement("div"),d.id="tt-offline-div",o.style.cssText=`display:none;`,d.textContent="...",c.appendChild(d),c.appendChild(s),u.appendChild(n),c.appendChild(u),a.appendChild(c),a.appendChild(h),document.body.appendChild(a)}function k(){e&&e.readyState===WebSocket.OPEN&&e.close()}function D(){if(i)return;t.open==!0?(c.style.display="",a.style.borderRadius="0.8rem 0.8rem 0.8rem 0rem",l.style.display="",b.style.display=""):(c.style.display="none",a.style.borderRadius="2rem 2rem 2rem 0rem",l.style.display="none",b.style.display="none")}function z(){if(i)return;if(clearTimeout(g),T)return;T=!0,setTimeout(()=>{T=!1},200),t.open=!t.open,S(),D(),v(),t.open&&(!e||e&&e.readyState==WebSocket.CLOSED)&&L(),!t.open&&e&&(g=setTimeout(k,$))}function y(e){if(i)return;A=e;let t="";switch(e){case r.ONLINE:d.style.display="none",n.style.display="";break;case r.OFFLINE:t=be,d.style.display="",n.style.display="none",o.style.display="none";break;case r.MAX_CONNS_REACHED:t=ve,d.style.display="",n.style.display="none",o.style.display="none";break;case r.NO_ACTIVE_SUB:t=ge,d.style.display="",n.style.display="none",o.style.display="none";break;default:console.log("Unknown ThinkerTron state: "+e)}d.textContent=t}function L(){if(i)return;if(w)return;if(w=!0,clearTimeout(g),e&&[WebSocket.OPEN,WebSocket.CONNECTING,WebSocket.CLOSING].includes(e.readyState)){w=!1;return}const n=`${window.location.origin}${window.location.pathname}`;[F,q]=Z(n);const a=`${Q}/${F}/${q}`;e=new WebSocket(a);const c=e;e.onerror=e=>{console.log("Connection Error.")},e.onopen=()=>{if(i)return;w=!1,clearTimeout(g),y(r.ONLINE),!t.open&&e&&(g=setTimeout(k,$)),setTimeout(()=>{A===r.ONLINE&&(y(r.ONLINE),E(`${me} ${t.nick}! `+we))},de)},e.onmessage=e=>{if(i)return;te(e)},e.onclose=t=>{if(i)return;if(e!==c){console.log("Stale socket close ignored.");return}w=!1,A!==r.MAX_CONNS_REACHED&&A!==r.NO_ACTIVE_SUB&&y(r.OFFLINE),clearTimeout(g),e.onmessage=e.onopen=e.onclose=null,e=null,p.textContent=V,s.innerHTML="",o.style.display="none",v()},window.__tt_beforeThinkerTronUnloadListenerAdded||(window.__tt_beforeThinkerTronUnloadListenerAdded=!0,window.addEventListener("beforeunload",()=>{k()}))}function R(){if(i)return;setTimeout(()=>{requestAnimationFrame(()=>{v()})},200)}function P(){this.placeholder=""}function H(){this.placeholder=K}function I(){v()}function v(){if(i)return;requestAnimationFrame(()=>{s&&(s.scrollTop=s.scrollHeight)})}function f(e,t,n){e&&typeof e.removeEventListener=="function"&&typeof n=="function"&&e.removeEventListener(t,n)}function m(e,t,n,s){e&&typeof e.addEventListener=="function"&&typeof n=="function"&&e.addEventListener(t,n,s||!1)}window.teardownThinkerTron=function(){if(i)return;i=!0,f(window,"resize",R),f(window,"beforeunload",k),f(u,"submit",B),f(n,"focus",P),f(n,"blur",H),f(h,"click",z),f(o,"click",I),f(l,"click",W),clearTimeout(g),g=null,e&&e.readyState===WebSocket.OPEN&&e.close(),e=null,a&&a.parentNode&&a.parentNode.removeChild(a),s=c=h=p=a=o=u=n=null,t=null},J(function(){console.log(`ðŸŸ¢ ThinkerTron Widget v${THINKERTRON_VERSION} booting...`),G(),X(),re(),ue(),U(t.theme),D(),t.open&&setTimeout(()=>L(),200),m(window,"resize",R)})})()